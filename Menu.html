<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Menu</title>
</head>
<body>
  <h2>Menu</h2>
  <button onclick="pesan('Nasi Goreng', 25000)">Nasi Goreng</button>
  <button onclick="pesan('Mie Ayam', 22000)">Mie Ayam</button>

  <ul id="daftar"></ul>
  <p>Total: Rp<span id="total">0</span></p>
  <button onclick="kirim()">Kirim</button>

<script>
  const daftar = [];
  const daftarEl = document.getElementById("daftar");
  const totalEl = document.getElementById("total");

  function pesan(menu, harga) {
    daftar.push({ menu, harga });
    render();
  }

  function render() {
    daftarEl.innerHTML = "";
    let total = 0;
    daftar.forEach(item => {
      const li = document.createElement("li");
      li.textContent = `${item.menu} - Rp${item.harga.toLocaleString()}`;
      daftarEl.appendChild(li);
      total += item.harga;
    });
    totalEl.textContent = total.toLocaleString();
  }

  function kirim() {
    fetch("https://script.google.com/macros/s/AKfycby0o9VRKPrULCobxLjkbnYM8n-vk1bbUNohryAq3L-nVOx3VTNgjztQQtJViN3UN1fY/exec", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(daftar)
    })
    .then(res => res.json())
    .then(res => {
      if (res.status === "success") {
        alert("Berhasil dikirim");
        daftar.length = 0;
        render();
      } else {
        alert("Gagal: " + res.message);
      }
    })
    .catch(err => {
      alert("Gagal kirim: " + err.message);
    });
  }
</script>
</body>
</html>

