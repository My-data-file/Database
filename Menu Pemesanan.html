<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Menu Pesanan</title>
</head>
<body>
  <h2>Menu</h2>
  <div>
    <button onclick="tambah('Nasi Goreng', 25000)">Nasi Goreng - Rp25.000</button>
    <button onclick="tambah('Mie Ayam', 22000)">Mie Ayam - Rp22.000</button>
  </div>

  <h3>Pesanan:</h3>
  <ul id="daftar"></ul>
  <p>Total: Rp<span id="total">0</span></p>
  <button onclick="kirim()">Kirim ke Google Sheet</button>

  <script>
    const daftar = [];
    const listEl = document.getElementById("daftar");
    const totalEl = document.getElementById("total");

    function tambah(menu, harga) {
      daftar.push({ menu, harga });
      render();
    }

    function render() {
      listEl.innerHTML = "";
      let total = 0;
      daftar.forEach((item, i) => {
        total += item.harga;
        const li = document.createElement("li");
        li.innerText = `${item.menu} - Rp${item.harga.toLocaleString()}`;
        listEl.appendChild(li);
      });
      totalEl.textContent = total.toLocaleString();
    }

    function kirim() {
      fetch("https://script.google.com/macros/s/AKfycbz0QIHbsLmo-neOiwbXqRlnRzoom5pMs2K8wmn4VPsxqV-VbneSKXWBpAPbsx_BzWJtRA/exec", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(daftar)
      })
      .then(res => res.json())
      .then(res => {
        if (res.status === "success") {
          alert("Berhasil!");
          daftar.length = 0;
          render();
        } else {
          alert("Gagal: " + res.message);
        }
      })
      .catch(err => {
        alert("Gagal kirim: " + err.message);
      });
    }
  </script>
</body>
</html>


